(this["webpackJsonpscheduler-component"]=this["webpackJsonpscheduler-component"]||[]).push([[0],{103:function(e,t,a){},106:function(e,t,a){e.exports=a.p+"static/media/tagforce_logo_and_text_black.d5eefb90.jpg"},133:function(e,t,a){e.exports=a(154)},138:function(e,t,a){},142:function(e,t,a){},147:function(e,t,a){},148:function(e,t,a){},149:function(e,t,a){},150:function(e,t,a){},151:function(e,t,a){},152:function(e,t,a){},154:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(13),l=a.n(c),o=(a(138),a(20)),i=a(114),s=a(17),u=a(10),m=a(31),d=a.n(m),f=a(57),p=a(48),E=a(185),h="tagluz.azurewebsites.net",v={data:[],setData:Object(u.b)((function(e,t){e.data=t})),fetchData:Object(u.d)(function(){var e=Object(f.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://".concat(h,"/days/getAll"));case 2:return a=e.sent,e.next=5,a.json();case 5:n=e.sent,t.setData(n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),loggedUser:{},setLoggedUser:Object(u.b)((function(e,t){e.loggedUser=t})),fetchLoggedUser:Object(u.d)(function(){var e=Object(f.a)(d.a.mark((function e(t,a){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://".concat(h,"/users/getUser/").concat(a));case 2:return n=e.sent,e.next=5,n.json();case 5:r=e.sent,t.setLoggedUser(r);case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),currentMonth:new Date,selectedDate:new Date,onSelectDate:Object(u.b)((function(e,t){e.selectedDate=t})),nextMonth:Object(u.b)((function(e,t){e.currentMonth=p.a(t,1)})),prevMonth:Object(u.b)((function(e,t){e.currentMonth=E.a(t,1)})),addShift:Object(u.d)(function(){var e=Object(f.a)(d.a.mark((function e(t,a){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://".concat(h,"/days/addShift"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 2:return n=e.sent,e.next=5,n.json();case 5:r=e.sent,t.setData(r);case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),addMessage:Object(u.d)(function(){var e=Object(f.a)(d.a.mark((function e(t,a){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://".concat(h,"/days/addMessage"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 2:return n=e.sent,e.next=5,n.json();case 5:r=e.sent,t.setData(r);case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),delShift:Object(u.d)(function(){var e=Object(f.a)(d.a.mark((function e(t,a){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://".concat(h,"/days/deleteShift"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 2:return n=e.sent,e.next=5,n.json();case 5:r=e.sent,t.setData(r);case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())},g=Object(u.c)(v),y=a(203),b=a(192),O=a(93),j=a(186),S=a(70),w=a.n(S),M=a(106),N=a.n(M);a(142);var C=function(e){var t=r.a.useState(""),a=Object(o.a)(t,2),n=a[0],c=a[1],l=r.a.useState(""),i=Object(o.a)(l,2),s=i[0],u=i[1],m=e.setIsUserKnown;return r.a.createElement("div",{className:"login-page"},r.a.createElement("div",{className:"column"},r.a.createElement(j.a,{color:"inherit",className:"logos"},r.a.createElement("span",{className:"logo-first-item"},r.a.createElement("img",{src:N.a,alt:"Tagforce logo",height:"30em"})),r.a.createElement("span",{className:"logo-divider"},"|"),r.a.createElement(w.a,null),r.a.createElement(O.a,{variant:"overline",style:{margin:"0.8em 0em 0em 0.25em"}},"Tagluz")),r.a.createElement("div",{className:"row"},r.a.createElement(y.a,{label:"Username:",id:"username",type:"username",autoFocus:!1,fullWidth:!1,value:n,onChange:function(e){c(e.target.value)}})),r.a.createElement("div",{className:"row"},r.a.createElement(y.a,{label:"Password:",id:"password",type:"password",autoFocus:!1,fullWidth:!1,value:s,onChange:function(e){u(e.target.value)}})),r.a.createElement("div",{className:"row"},r.a.createElement(b.a,{onClick:function(){return function(e,t){fetch("https://".concat("tagluz.azurewebsites.net","/users/checkUser/").concat(n,"/").concat(t)).then((function(e){return e.json()})).then((function(e){e&&(localStorage.setItem("username",n),m(!0))}))}(0,s)},color:"primary",fullWidth:!0,variant:"outlined"},"Log In"))))},k=a(198),D=a(199),x=a(200),T=a(110),U=a.n(T),A=a(205),z=a(196),F=a(194),W=a(193),I=a(195),_=a(204),J=a(108),L=a.n(J),P=a(109),B=a.n(P),R=(a(103),function(e){var t=r.a.useState(""),a=Object(o.a)(t,2),n=a[0],c=a[1],l=r.a.useState(!1),i=Object(o.a)(l,2),s=i[0],u=i[1];return r.a.createElement(A.a,{open:e.isModalOpen,onClose:e.onModalClose,"aria-labelledby":"form-dialog-title",className:"add-user-modal"},r.a.createElement(W.a,{id:"form-dialog-title"},"Add a User"),r.a.createElement(F.a,null,r.a.createElement(y.a,{autoFocus:!0,label:"User Name:",id:"name",type:"name",fullWidth:!1,value:n,onChange:function(e){c(e.target.value)}}),r.a.createElement("div",null,r.a.createElement(I.a,{control:r.a.createElement(_.a,{icon:r.a.createElement(L.a,null),checkedIcon:r.a.createElement(B.a,null),name:"makeAdmin",color:"secondary",value:s,onChange:function(){return u(!s)}}),label:"Appoint user admin"}))),r.a.createElement(z.a,null,r.a.createElement(b.a,{onClick:function(){!function(){var e={name:n,isAdmin:s};fetch("https://".concat("tagluz.azurewebsites.net","/users/mkUser"),{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((function(e){console.log("posted new user!")}))}(),c("")},color:"primary",size:"small"},"Add")))}),H=a(197);var K=function(e){return r.a.createElement(A.a,{open:e.isModalOpen,onClose:e.onModalClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(W.a,{id:"alert-dialog-title"},"About Tagluz"),r.a.createElement(F.a,null,r.a.createElement(H.a,{id:"alert-dialog-description"},r.a.createElement("div",null,"Tagluz 0.91"),r.a.createElement("div",null,"By Pitamer"),r.a.createElement("div",null,"With lots of help from Ariel"))),r.a.createElement(z.a,null,r.a.createElement(b.a,{onClick:e.onModalClose,color:"primary",autoFocus:!0},"Nice :)")))},G=Object(k.a)((function(e){return{root:{flexGrow:1,zIndex:2,position:"relative"},appBar:{background:"var(--main-color)"},title:{marginRight:e.spacing(2),flexGrow:1},titleText:{margin:"0em 0em 0em 0.5em"}}}));var q=function(){var e=r.a.useState(!1),t=Object(o.a)(e,2),a=t[0],n=t[1],c=r.a.useState(!1),l=Object(o.a)(c,2),i=l[0],s=l[1],m=Object(u.f)((function(e){return e.loggedUser})),d=G(),f=m.isAdmin?"":"none";return r.a.createElement("div",{className:d.root},r.a.createElement(D.a,{position:"static"},r.a.createElement(x.a,{className:d.appBar},r.a.createElement(O.a,{variant:"h6",className:d.title,onClick:function(){return s(!0)}},r.a.createElement(j.a,{color:"inherit",className:d.title},r.a.createElement(w.a,null),r.a.createElement(O.a,{variant:"button",className:d.titleText},"Tagluz"))),r.a.createElement(K,{isModalOpen:i,onModalClose:function(){return s(!1)}}),r.a.createElement(j.a,{color:"inherit",style:{display:f,marginRight:"1rem"},onClick:function(){return n(!0)}},r.a.createElement(U.a,null)),r.a.createElement(R,{isModalOpen:a,onModalClose:function(){return n(!1)}}),r.a.createElement(b.a,{color:"inherit",onClick:function(){localStorage.clear(),document.location.href="/"}},"Logout"))))},Q=a(117);var V=function(e){return r.a.createElement("div",{className:"col col-".concat(e.place)},r.a.createElement("div",{className:"icon",onClick:e.action},"chevron_",e.direction))};a(147);var X=function(){var e=Object(u.f)((function(e){return e.currentMonth})),t=Object(u.e)((function(e){return e.prevMonth})),a=Object(u.e)((function(e){return e.nextMonth}));return r.a.createElement("div",{className:"header row flex-middle"},r.a.createElement(V,{place:"start",direction:"left",action:function(){return t(e)}}),r.a.createElement("div",{className:"col col-center header-title"},r.a.createElement("span",null,Q.a(e,"MMMM yyyy"))),r.a.createElement(V,{place:"end",direction:"right",action:function(){return a(e)}}))};a(148);var Y=function(){for(var e=[],t=0,a=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];t<a.length;t++){var n=a[t];e.push(r.a.createElement("div",{className:"col col-center",key:n},n))}return r.a.createElement("div",{className:"days row"},e)},Z=a(87),$=a(88),ee=a(89),te=a(90),ae=a(112),ne=a(86),re=a(113),ce=a(201),le=a(5),oe=a(206),ie=a(7),se=Object(ie.a)((function(e){return{tooltip:{}}}))(oe.a);var ue=function(e){var t=e.items.map((function(t){return r.a.createElement(O.a,{key:e.items.indexOf(t)},t)}));return r.a.createElement(se,{arrow:!0,placement:"top",title:t},r.a.createElement("span",{className:"icon"},e.icon))},me=a(202),de=a(21),fe=a(116),pe=Object(ie.a)({root:{width:"5.5rem",margin:"0.5rem"}})(me.a);var Ee=function(e){return r.a.createElement(de.a,{utils:fe.a},r.a.createElement(pe,{label:"Start",value:e.shiftStartTime,onChange:e.setShiftStartTime,minutesStep:5}),r.a.createElement(pe,{label:"End",value:e.shiftEndTime,onChange:e.setShiftEndTime,minutesStep:5}))};var he=function(e){var t=r.a.useState(!1),a=Object(o.a)(t,2),n=a[0],c=a[1];if(e.items.length<1)return r.a.createElement(b.a,{disabled:!0},r.a.createElement("span",{className:"icon notifier"},e.icon));var l=function(){c(!0)},i=e.items.map((function(t){return r.a.createElement(O.a,{key:e.items.indexOf(t)},t)}));return r.a.createElement(oe.a,{arrow:!0,placement:"top",title:i,onClose:function(){return c(!1)},open:n},r.a.createElement(b.a,{onClick:l,onMouseOver:l},r.a.createElement("span",{className:"icon notifier"},e.icon)))};a(149);var ve=function(e){var t=Q.a(e.day,"EEEE, MMMM d"),a=void 0!==e.userShift;r.a.useEffect((function(){f(a?e.userShift.startTime:e.day.setHours(8)),v(a?e.userShift.endTime:e.day.setHours(16))}),[a]);var n=Object(u.f)((function(e){return e.loggedUser})),c=Object(u.e)((function(e){return e.addShift})),l=Object(u.e)((function(e){return e.delShift})),i=Object(u.e)((function(e){return e.addMessage})),s=r.a.useState(null),m=Object(o.a)(s,2),d=m[0],f=m[1],p=r.a.useState(null),E=Object(o.a)(p,2),h=E[0],v=E[1],g=r.a.useState(""),O=Object(o.a)(g,2),j=O[0],S=O[1],w=n.isAdmin?"":"none",M=a?"":"none",N=a?"none":"",C=!a||j.length>1?"":"none",k=e.day.setHours(8);return r.a.createElement(A.a,{open:e.isModalOpen,onClose:e.onModalClose,"aria-labelledby":"form-dialog-title",className:"day-modal"},r.a.createElement(W.a,{id:"form-dialog-title"},t),r.a.createElement(F.a,null,r.a.createElement(he,{icon:"report",items:e.dayAlerts}),r.a.createElement(he,{icon:"textsms",items:e.dayFormattedMessages}),r.a.createElement(he,{icon:"people_alt",items:e.dayWorkers}),r.a.createElement("hr",null),r.a.createElement("div",{style:{display:N}},r.a.createElement(oe.a,{arrow:!0,placement:"top",title:"Reserve full day"},r.a.createElement(b.a,{onClick:function(){var t={day:k,newShift:{user:n.name,startTime:d,endTime:h,isAllDay:!0}};console.log(t),c(t),e.onModalClose()},fullWidth:!0,variant:"contained",disableElevation:!0,style:{background:"rgba(255, 255, 0, 0.2)",border:"1px lightgrey solid"}},r.a.createElement("span",{className:"icon"},"bookmark_border"),"Reserve all day"))),r.a.createElement("div",{className:"time-range-picker ".concat(e.dayColor)},r.a.createElement(Ee,{day:e.day,shiftStartTime:d,setShiftStartTime:f,shiftEndTime:h,setShiftEndTime:v})),r.a.createElement("div",{style:{display:M}},r.a.createElement(oe.a,{arrow:!0,placement:"top",title:"Delete shift"},r.a.createElement(b.a,{onClick:function(){var t={day:k,user:e.userShift.user};l(t),e.onModalClose()},fullWidth:!0,variant:"contained",disableElevation:!0},r.a.createElement("span",{className:"icon"},"delete"),"Delete shift"))),r.a.createElement("div",{style:{display:w}},r.a.createElement(y.a,{autoFocus:!1,id:"name",label:"Add a Message",type:"name",fullWidth:!0,value:j,onChange:function(e){S(e.target.value)}}))),r.a.createElement(z.a,null,r.a.createElement("div",{style:{display:C}},r.a.createElement(b.a,{onClick:function(){if(j.length<1){var t={day:k,newShift:{user:n.name,startTime:d,endTime:h,isAllDay:!1}};console.log(t),c(t),e.onModalClose()}else{var a={day:k,newMessage:{user:n.name,content:j}};i(a),S("")}},color:"primary",size:"small"},"save"))))};a(150);var ge=function(e){var t=Object(u.f)((function(e){return e.selectedDate})),a=Object(u.e)((function(e){return e.onSelectDate})),n=Object(u.f)((function(e){return e.loggedUser})),c=r.a.useState(!1),l=Object(o.a)(c,2),i=l[0],s=l[1],m=void 0===e.dayData?[]:e.dayData.shifts,d=void 0===e.dayData?[]:e.dayData.alerts,f=void 0===e.dayData?[]:e.dayData.messages,p=m.find((function(e){return e.user===n.name})),E=void 0===p?null:p.isAllDay?"yellow":"green",h=re.a(e.day,e.monthStart)?ce.a(e.day)?"closed":ae.a(e.day,e.selectedDate)?"selected":null:"disabled",v=m.map((function(e){return e.user})),g=f.map((function(e){return"".concat(e.user,": ").concat(e.content)})),y=f.length<1?null:r.a.createElement(ue,{icon:"textsms",items:g,key:"m"}),b=d.length<1?null:r.a.createElement(ue,{icon:"report",items:d,key:"a"}),O=void 0===e.dayData?null:[y,b];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"col cell ".concat(h),onClick:function(){return n=le.a(e.day),void(ae.a(n,t)?s(!0):a(n));var n}},r.a.createElement("span",{className:"number ".concat(E)},e.formattedDate),r.a.createElement("span",{className:"bg"},e.formattedDate),r.a.createElement("div",{className:"notifiers-area"},O)),r.a.createElement(ve,{day:e.day,isModalOpen:i,onModalClose:function(){return s(!1)},dayFormattedMessages:g,dayWorkers:v,dayAlerts:d,userShift:p,dayColor:E}))};a(151);var ye=function(){for(var e=Object(u.f)((function(e){return e.currentMonth})),t=Object(u.f)((function(e){return e.selectedDate})),a=Object(u.f)((function(e){return e.data})),n=Z.a(e),c=$.a(n),l=ee.a(n),o=te.a(c),i=[],s=[],m=l;m<=o;){for(var d=0;d<7;d++){var f=Q.a(m,"d"),p=a.find((function(e){return ae.a(new Date(e.date),m)}));s.push(r.a.createElement(ge,{key:m,day:m,dayData:p,monthStart:n,selectedDate:t,formattedDate:f})),m=ne.a(m,1)}i.push(r.a.createElement("div",{className:"row",key:m},s)),s=[]}return r.a.createElement("div",{className:"body"},i)};a(152);var be=function(){var e=Object(u.e)((function(e){return e.fetchData})),t=Object(u.e)((function(e){return e.fetchLoggedUser}));return Object(n.useEffect)((function(){var a=localStorage.getItem("username");a&&(e(),t(a))}),[]),r.a.createElement("div",{className:"calendar"},r.a.createElement(X,null),r.a.createElement(Y,null),r.a.createElement(ye,null))};var Oe=function(){var e=r.a.useState(null!==localStorage.getItem("username")),t=Object(o.a)(e,2),a=t[0],c=t[1],l=r.a.useState(""),m=Object(o.a)(l,2),d=m[0],f=m[1];return Object(n.useEffect)((function(){f(a?"/calendar":"/login")}),[a]),r.a.createElement("div",{className:"App"},r.a.createElement(u.a,{store:g},r.a.createElement(i.a,null,d?r.a.createElement(s.a,{to:d}):r.a.createElement(r.a.Fragment,null),r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/login"},r.a.createElement(C,{isUserKnown:a,setIsUserKnown:c})),r.a.createElement(s.b,{path:"/calendar"},r.a.createElement(q,null),r.a.createElement("main",null,r.a.createElement(be,null))),r.a.createElement(s.b,{path:"*"},r.a.createElement(s.a,{to:d}))))))};l.a.render(r.a.createElement(r.a.Fragment,null,r.a.createElement(Oe,null)),document.getElementById("root"))}},[[133,1,2]]]);
//# sourceMappingURL=main.21f5bc4b.chunk.js.map