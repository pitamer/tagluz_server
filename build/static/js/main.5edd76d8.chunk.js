(this["webpackJsonpscheduler-component"]=this["webpackJsonpscheduler-component"]||[]).push([[0],{109:function(e,t,a){e.exports=a.p+"static/media/tagforce_logo_and_text_black.d5eefb90.jpg"},132:function(e,t,a){e.exports=a(155)},137:function(e,t,a){},141:function(e,t,a){},142:function(e,t,a){},147:function(e,t,a){},148:function(e,t,a){},149:function(e,t,a){},150:function(e,t,a){},151:function(e,t,a){},152:function(e,t,a){},153:function(e,t,a){},155:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(13),l=a.n(c),o=(a(137),a(20)),s=a(111),i=a(17),u=a(10),m=a(31),d=a.n(m),f=a(57),p=a(48),E=a(185),h="tagluz.azurewebsites.net",v={data:[],setData:Object(u.b)((function(e,t){e.data=t})),fetchData:Object(u.d)(function(){var e=Object(f.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://".concat(h,"/days/getAll"));case 2:return a=e.sent,e.next=5,a.json();case 5:n=e.sent,t.setData(n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),loggedUser:{},setLoggedUser:Object(u.b)((function(e,t){e.loggedUser=t})),fetchLoggedUser:Object(u.d)(function(){var e=Object(f.a)(d.a.mark((function e(t,a){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://".concat(h,"/users/getUser/").concat(a));case 2:return n=e.sent,e.next=5,n.json();case 5:r=e.sent,t.setLoggedUser(r);case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),currentMonth:new Date,selectedDate:new Date,onSelectDate:Object(u.b)((function(e,t){e.selectedDate=t})),nextMonth:Object(u.b)((function(e,t){e.currentMonth=p.a(t,1)})),prevMonth:Object(u.b)((function(e,t){e.currentMonth=E.a(t,1)})),addShift:Object(u.d)(function(){var e=Object(f.a)(d.a.mark((function e(t,a){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://".concat(h,"/days/addShift"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 2:return n=e.sent,e.next=5,n.json();case 5:r=e.sent,t.setData(r);case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),addMessage:Object(u.d)(function(){var e=Object(f.a)(d.a.mark((function e(t,a){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://".concat(h,"/days/addMessage"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 2:return n=e.sent,e.next=5,n.json();case 5:r=e.sent,t.setData(r);case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),delShift:Object(u.d)(function(){var e=Object(f.a)(d.a.mark((function e(t,a){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://".concat(h,"/days/deleteShift"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 2:return n=e.sent,e.next=5,n.json();case 5:r=e.sent,t.setData(r);case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())},g=Object(u.c)(v);a(141);var y=function(){return r.a.createElement("div",{className:"footer"},r.a.createElement("ul",{className:"left-items"},r.a.createElement("li",null,"Tagluz 0.91")),r.a.createElement("ul",{className:"right-items"},r.a.createElement("li",null,"by Pitamar")))},b=a(197),O=a(198),j=a(199),S=a(116),w=a(196),N=a(194),M=a(105),k=a.n(M),D=a(202),C=a(204),x=a(195),T=a(191),U=a(190),A=a(193),z=a(203),F=a(103),W=a.n(F),I=a(104),_=a.n(I),J=(a(142),function(e){var t=r.a.useState(""),a=Object(o.a)(t,2),n=a[0],c=a[1],l=r.a.useState(!1),s=Object(o.a)(l,2),i=s[0],u=s[1];return r.a.createElement(C.a,{open:e.isModalOpen,onClose:e.onModalClose,"aria-labelledby":"form-dialog-title",className:"add-user-modal"},r.a.createElement(U.a,{id:"form-dialog-title"},"Add a User"),r.a.createElement(T.a,null,r.a.createElement(D.a,{autoFocus:!0,label:"User Name:",id:"name",type:"name",fullWidth:!1,value:n,onChange:function(e){c(e.target.value)}}),r.a.createElement("div",null,r.a.createElement(A.a,{control:r.a.createElement(z.a,{icon:r.a.createElement(W.a,null),checkedIcon:r.a.createElement(_.a,null),name:"makeAdmin",color:"secondary",value:i,onChange:function(){return u(!i)}}),label:"Appoint user admin"}))),r.a.createElement(x.a,null,r.a.createElement(w.a,{onClick:function(){!function(){var e={name:n,isAdmin:i};fetch("https://".concat("tagluz.azurewebsites.net","/users/mkUser"),{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((function(e){console.log("posted new user!")}))}(),c("")},color:"primary",size:"small"},"Add")))}),L=Object(b.a)((function(e){return{root:{flexGrow:1,zIndex:2,position:"relative"},appBar:{background:"var(--main-color)"},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}}));var P=function(){var e=r.a.useState(!1),t=Object(o.a)(e,2),a=t[0],n=t[1],c=Object(u.f)((function(e){return e.loggedUser})),l=L(),s=c.isAdmin?"":"none";return r.a.createElement("div",{className:l.root},r.a.createElement(O.a,{position:"static"},r.a.createElement(j.a,{className:l.appBar},r.a.createElement(S.a,{variant:"h6",className:l.title},"Tagluz"),r.a.createElement(N.a,{color:"inherit",style:{display:s,marginRight:"1rem"},onClick:function(){return n(!0)}},r.a.createElement(k.a,null)),r.a.createElement(J,{isModalOpen:a,onModalClose:function(){return n(!1)}}),r.a.createElement(w.a,{color:"inherit",onClick:function(){localStorage.clear(),document.location.href="/"}},"Logout"))))},B=a(114);var R=function(e){return r.a.createElement("div",{className:"col col-".concat(e.place)},r.a.createElement("div",{className:"icon",onClick:e.action},"chevron_",e.direction))};a(147);var H=function(){var e=Object(u.f)((function(e){return e.currentMonth})),t=Object(u.e)((function(e){return e.prevMonth})),a=Object(u.e)((function(e){return e.nextMonth}));return r.a.createElement("div",{className:"header row flex-middle"},r.a.createElement(R,{place:"start",direction:"left",action:function(){return t(e)}}),r.a.createElement("div",{className:"col col-center header-title"},r.a.createElement("span",null,B.a(e,"MMMM yyyy"))),r.a.createElement(R,{place:"end",direction:"right",action:function(){return a(e)}}))};a(148);var K=function(){for(var e=[],t=0,a=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];t<a.length;t++){var n=a[t];e.push(r.a.createElement("div",{className:"col col-center",key:n},n))}return r.a.createElement("div",{className:"days row"},e)},G=a(86),q=a(87),Q=a(88),V=a(89),X=a(107),Y=a(85),Z=a(108),$=a(200),ee=a(5),te=a(205),ae=a(7),ne=Object(ae.a)((function(e){return{tooltip:{}}}))(te.a);var re=function(e){var t=e.items.map((function(t){return r.a.createElement(S.a,{key:e.items.indexOf(t)},t)}));return r.a.createElement(ne,{arrow:!0,placement:"top",title:t},r.a.createElement("span",{className:"icon"},e.icon))},ce=a(201),le=a(21),oe=a(113),se=Object(ae.a)({root:{width:"5.5rem",margin:"0.5rem"}})(ce.a);var ie=function(e){return r.a.createElement(le.a,{utils:oe.a},r.a.createElement(se,{label:"Start",value:e.shiftStartTime,onChange:e.setShiftStartTime,minutesStep:5}),r.a.createElement(se,{label:"End",value:e.shiftEndTime,onChange:e.setShiftEndTime,minutesStep:5}))};var ue=function(e){var t=r.a.useState(!1),a=Object(o.a)(t,2),n=a[0],c=a[1];if(e.items.length<1)return r.a.createElement(w.a,{disabled:!0},r.a.createElement("span",{className:"icon notifier"},e.icon));var l=function(){c(!0)},s=e.items.map((function(t){return r.a.createElement(S.a,{key:e.items.indexOf(t)},t)}));return r.a.createElement(te.a,{arrow:!0,placement:"top",title:s,onClose:function(){return c(!1)},open:n},r.a.createElement(w.a,{onClick:l,onMouseOver:l},r.a.createElement("span",{className:"icon notifier"},e.icon)))};a(149);var me=function(e){var t=B.a(e.day,"EEEE, MMMM d"),a=void 0!==e.userShift;r.a.useEffect((function(){f(a?e.userShift.startTime:e.day.setHours(8)),v(a?e.userShift.endTime:e.day.setHours(16))}),[a]);var n=Object(u.f)((function(e){return e.loggedUser})),c=Object(u.e)((function(e){return e.addShift})),l=Object(u.e)((function(e){return e.delShift})),s=Object(u.e)((function(e){return e.addMessage})),i=r.a.useState(null),m=Object(o.a)(i,2),d=m[0],f=m[1],p=r.a.useState(null),E=Object(o.a)(p,2),h=E[0],v=E[1],g=r.a.useState(""),y=Object(o.a)(g,2),b=y[0],O=y[1],j=n.isAdmin?"":"none",S=a?"":"none",N=a?"none":"",M=!a||b.length>1?"":"none",k=e.day.setHours(8);return r.a.createElement(C.a,{open:e.isModalOpen,onClose:e.onModalClose,"aria-labelledby":"form-dialog-title",className:"day-modal"},r.a.createElement(U.a,{id:"form-dialog-title"},t),r.a.createElement(T.a,null,r.a.createElement(ue,{icon:"report",items:e.dayAlerts}),r.a.createElement(ue,{icon:"textsms",items:e.dayFormattedMessages}),r.a.createElement(ue,{icon:"people_alt",items:e.dayWorkers}),r.a.createElement("hr",null),r.a.createElement("div",{style:{display:N}},r.a.createElement(te.a,{arrow:!0,placement:"top",title:"Reserve full day"},r.a.createElement(w.a,{onClick:function(){var t={day:k,newShift:{user:n.name,startTime:d,endTime:h,isAllDay:!0}};console.log(t),c(t),e.onModalClose()},fullWidth:!0,variant:"contained",disableElevation:!0,style:{background:"rgba(255, 255, 0, 0.2)",border:"1px lightgrey solid"}},r.a.createElement("span",{className:"icon"},"bookmark_border"),"Reserve all day"))),r.a.createElement("div",{className:"time-range-picker ".concat(e.dayColor)},r.a.createElement(ie,{day:e.day,shiftStartTime:d,setShiftStartTime:f,shiftEndTime:h,setShiftEndTime:v})),r.a.createElement("div",{style:{display:S}},r.a.createElement(te.a,{arrow:!0,placement:"top",title:"Delete shift"},r.a.createElement(w.a,{onClick:function(){var t={day:k,user:e.userShift.user};l(t),e.onModalClose()},fullWidth:!0,variant:"contained",disableElevation:!0},r.a.createElement("span",{className:"icon"},"delete"),"Delete shift"))),r.a.createElement("div",{style:{display:j}},r.a.createElement(D.a,{autoFocus:!1,id:"name",label:"Add a Message",type:"name",fullWidth:!0,value:b,onChange:function(e){O(e.target.value)}}))),r.a.createElement(x.a,null,r.a.createElement("div",{style:{display:M}},r.a.createElement(w.a,{onClick:function(){if(b.length<1){var t={day:k,newShift:{user:n.name,startTime:d,endTime:h,isAllDay:!1}};console.log(t),c(t),e.onModalClose()}else{var a={day:k,newMessage:{user:n.name,content:b}};s(a),O("")}},color:"primary",size:"small"},"save"))))};a(150);var de=function(e){var t=Object(u.f)((function(e){return e.selectedDate})),a=Object(u.e)((function(e){return e.onSelectDate})),n=Object(u.f)((function(e){return e.loggedUser})),c=r.a.useState(!1),l=Object(o.a)(c,2),s=l[0],i=l[1],m=void 0===e.dayData?[]:e.dayData.shifts,d=void 0===e.dayData?[]:e.dayData.alerts,f=void 0===e.dayData?[]:e.dayData.messages,p=m.find((function(e){return e.user===n.name})),E=void 0===p?null:p.isAllDay?"yellow":"green",h=Z.a(e.day,e.monthStart)?$.a(e.day)?"closed":X.a(e.day,e.selectedDate)?"selected":null:"disabled",v=m.map((function(e){return e.user})),g=f.map((function(e){return"".concat(e.user,": ").concat(e.content)})),y=f.length<1?null:r.a.createElement(re,{icon:"textsms",items:g,key:"m"}),b=d.length<1?null:r.a.createElement(re,{icon:"report",items:d,key:"a"}),O=void 0===e.dayData?null:[y,b];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"col cell ".concat(h),onClick:function(){return n=ee.a(e.day),void(X.a(n,t)?i(!0):a(n));var n}},r.a.createElement("span",{className:"number ".concat(E)},e.formattedDate),r.a.createElement("span",{className:"bg"},e.formattedDate),r.a.createElement("div",{className:"notifiers-area"},O)),r.a.createElement(me,{day:e.day,isModalOpen:s,onModalClose:function(){return i(!1)},dayFormattedMessages:g,dayWorkers:v,dayAlerts:d,userShift:p,dayColor:E}))};a(151);var fe=function(){for(var e=Object(u.f)((function(e){return e.currentMonth})),t=Object(u.f)((function(e){return e.selectedDate})),a=Object(u.f)((function(e){return e.data})),n=G.a(e),c=q.a(n),l=Q.a(n),o=V.a(c),s=[],i=[],m=l;m<=o;){for(var d=0;d<7;d++){var f=B.a(m,"d"),p=a.find((function(e){return X.a(new Date(e.date),m)}));i.push(r.a.createElement(de,{key:m,day:m,dayData:p,monthStart:n,selectedDate:t,formattedDate:f})),m=Y.a(m,1)}s.push(r.a.createElement("div",{className:"row",key:m},i)),i=[]}return r.a.createElement("div",{className:"body"},s)};a(152);var pe=function(){var e=Object(u.e)((function(e){return e.fetchData})),t=Object(u.e)((function(e){return e.fetchLoggedUser}));return Object(n.useEffect)((function(){var a=localStorage.getItem("username");a&&(e(),t(a))}),[]),r.a.createElement("div",{className:"calendar"},r.a.createElement(H,null),r.a.createElement(K,null),r.a.createElement(fe,null))},Ee=a(110),he=a.n(Ee),ve=a(109),ge=a.n(ve);a(153);var ye=function(e){var t=r.a.useState(""),a=Object(o.a)(t,2),n=a[0],c=a[1],l=r.a.useState(""),s=Object(o.a)(l,2),i=s[0],u=s[1],m=e.setIsUserKnown;return r.a.createElement("div",{className:"login-page"},r.a.createElement("div",{className:"column"},r.a.createElement(N.a,{color:"inherit",className:"logos"},r.a.createElement("span",{className:"logo-first-item"},r.a.createElement("img",{src:ge.a,alt:"Tagforce logo",height:"30em"})),r.a.createElement("span",{className:"logo-divider"},"|"),r.a.createElement(he.a,null),r.a.createElement(S.a,{variant:"overline",style:{margin:"0.8em 0em 0em 0.25em"}},"Tagluz")),r.a.createElement("div",{className:"row"},r.a.createElement(D.a,{label:"Username:",id:"username",type:"username",autoFocus:!1,fullWidth:!1,value:n,onChange:function(e){c(e.target.value)}})),r.a.createElement("div",{className:"row"},r.a.createElement(D.a,{label:"Password:",id:"password",type:"password",autoFocus:!1,fullWidth:!1,value:i,onChange:function(e){u(e.target.value)}})),r.a.createElement("div",{className:"row"},r.a.createElement(w.a,{onClick:function(){return function(e,t){fetch("https://".concat("tagluz.azurewebsites.net","/users/checkUser/").concat(n,"/").concat(t)).then((function(e){return e.json()})).then((function(e){e&&(localStorage.setItem("username",n),m(!0))}))}(0,i)},color:"primary",fullWidth:!0,variant:"outlined"},"Log In"))))};var be=function(){var e=r.a.useState(null!==localStorage.getItem("username")),t=Object(o.a)(e,2),a=t[0],c=t[1],l=r.a.useState(""),m=Object(o.a)(l,2),d=m[0],f=m[1];return Object(n.useEffect)((function(){f(a?"/calendar":"/login")}),[a]),r.a.createElement("div",{className:"App"},r.a.createElement(u.a,{store:g},r.a.createElement(s.a,null,d?r.a.createElement(i.a,{to:d}):r.a.createElement(r.a.Fragment,null),r.a.createElement(i.d,null,r.a.createElement(i.b,{path:"/login"},r.a.createElement(ye,{isUserKnown:a,setIsUserKnown:c})),r.a.createElement(i.b,{path:"/calendar"},r.a.createElement(P,null),r.a.createElement("main",null,r.a.createElement(pe,null)),r.a.createElement(y,null)),r.a.createElement(i.b,{path:"*"},r.a.createElement(i.a,{to:d}))))))};l.a.render(r.a.createElement(r.a.Fragment,null,r.a.createElement(be,null)),document.getElementById("root"))}},[[132,1,2]]]);
//# sourceMappingURL=main.5edd76d8.chunk.js.map