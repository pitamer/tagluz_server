(this["webpackJsonpscheduler-component"]=this["webpackJsonpscheduler-component"]||[]).push([[0],{111:function(e,t,a){e.exports=a.p+"static/media/tagforce_logo_and_text_black.d5eefb90.jpg"},134:function(e,t,a){e.exports=a(157)},139:function(e,t,a){},143:function(e,t,a){},144:function(e,t,a){},149:function(e,t,a){},150:function(e,t,a){},151:function(e,t,a){},152:function(e,t,a){},153:function(e,t,a){},154:function(e,t,a){},155:function(e,t,a){},157:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(13),l=a.n(c),o=(a(139),a(20)),s=a(113),i=a(17),u=a(10),m=a(31),d=a.n(m),f=a(57),p=a(48),h=a(187),E="tagluz.azurewebsites.net",v={data:[],setData:Object(u.b)((function(e,t){e.data=t})),fetchData:Object(u.d)(function(){var e=Object(f.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://".concat(E,"/days/getAll"));case 2:return a=e.sent,e.next=5,a.json();case 5:n=e.sent,t.setData(n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),loggedUser:{},setLoggedUser:Object(u.b)((function(e,t){e.loggedUser=t})),fetchLoggedUser:Object(u.d)(function(){var e=Object(f.a)(d.a.mark((function e(t,a){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://".concat(E,"/users/getUser/").concat(a));case 2:return n=e.sent,e.next=5,n.json();case 5:r=e.sent,t.setLoggedUser(r);case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),currentMonth:new Date,selectedDate:new Date,onSelectDate:Object(u.b)((function(e,t){e.selectedDate=t})),nextMonth:Object(u.b)((function(e,t){e.currentMonth=p.a(t,1)})),prevMonth:Object(u.b)((function(e,t){e.currentMonth=h.a(t,1)})),addShift:Object(u.d)(function(){var e=Object(f.a)(d.a.mark((function e(t,a){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://".concat(E,"/days/addShift"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 2:return n=e.sent,e.next=5,n.json();case 5:r=e.sent,t.setData(r);case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),addMessage:Object(u.d)(function(){var e=Object(f.a)(d.a.mark((function e(t,a){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://".concat(E,"/days/addMessage"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 2:return n=e.sent,e.next=5,n.json();case 5:r=e.sent,t.setData(r);case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),delShift:Object(u.d)(function(){var e=Object(f.a)(d.a.mark((function e(t,a){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://".concat(E,"/days/deleteShift"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 2:return n=e.sent,e.next=5,n.json();case 5:r=e.sent,t.setData(r);case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}())},y=Object(u.c)(v);a(143);var g=function(){return r.a.createElement("div",{className:"footer"},r.a.createElement("ul",{className:"left-items"},r.a.createElement("li",null,"Tagluz 0.91")),r.a.createElement("ul",{className:"right-items"},r.a.createElement("li",null,"by Pitamar")))},b=a(199),O=a(200),j=a(201),S=a(118),w=a(198),N=a(196),M=a(107),k=a.n(M),D=a(205),C=a(207),x=a(197),T=a(193),U=a(192),A=a(195),z=a(206),F=a(105),W=a.n(F),I=a(106),_=a.n(I),J=(a(144),function(e){var t=r.a.useState(""),a=Object(o.a)(t,2),n=a[0],c=a[1],l=r.a.useState(!1),s=Object(o.a)(l,2),i=s[0],u=s[1];return r.a.createElement(C.a,{open:e.isModalOpen,onClose:e.onModalClose,"aria-labelledby":"form-dialog-title",className:"add-user-modal"},r.a.createElement(U.a,{id:"form-dialog-title"},"Add a User"),r.a.createElement(T.a,null,r.a.createElement(D.a,{autoFocus:!0,label:"User Name:",id:"name",type:"name",fullWidth:!1,value:n,onChange:function(e){c(e.target.value)}}),r.a.createElement("div",null,r.a.createElement(A.a,{control:r.a.createElement(z.a,{icon:r.a.createElement(W.a,null),checkedIcon:r.a.createElement(_.a,null),name:"makeAdmin",color:"secondary",value:i,onChange:function(){return u(!i)}}),label:"Appoint user admin"}))),r.a.createElement(x.a,null,r.a.createElement(w.a,{onClick:function(){!function(){var e={name:n,isAdmin:i};fetch("https://".concat("tagluz.azurewebsites.net","/users/mkUser"),{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((function(e){console.log("posted new user!")}))}(),c("")},color:"primary",size:"small"},"Add")))}),L=Object(b.a)((function(e){return{root:{flexGrow:1,zIndex:2,position:"relative"},appBar:{background:"var(--main-color)"},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}}));var P=function(){var e=r.a.useState(!1),t=Object(o.a)(e,2),a=t[0],n=t[1],c=Object(u.f)((function(e){return e.loggedUser})),l=L(),s=c.isAdmin?"":"none";return r.a.createElement("div",{className:l.root},r.a.createElement(O.a,{position:"static"},r.a.createElement(j.a,{className:l.appBar},r.a.createElement(S.a,{variant:"h6",className:l.title},"Tagluz"),r.a.createElement(N.a,{color:"inherit",style:{display:s,marginRight:"1rem"},onClick:function(){return n(!0)}},r.a.createElement(k.a,null)),r.a.createElement(J,{isModalOpen:a,onModalClose:function(){return n(!1)}}),r.a.createElement(w.a,{color:"inherit",onClick:function(){localStorage.clear(),document.location.href="/"}},"Logout"))))},B=a(116);var R=function(e){return r.a.createElement("div",{className:"col col-".concat(e.place)},r.a.createElement("div",{className:"icon",onClick:e.action},"chevron_",e.direction))};a(149);var K=function(){var e=Object(u.f)((function(e){return e.currentMonth})),t=Object(u.e)((function(e){return e.prevMonth})),a=Object(u.e)((function(e){return e.nextMonth}));return r.a.createElement("div",{className:"header row flex-middle"},r.a.createElement(R,{place:"start",direction:"left",action:function(){return t(e)}}),r.a.createElement("div",{className:"col col-center header-title"},r.a.createElement("span",null,B.a(e,"MMMM yyyy"))),r.a.createElement(R,{place:"end",direction:"right",action:function(){return a(e)}}))};a(150);var G=function(){for(var e=[],t=0,a=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];t<a.length;t++){var n=a[t];e.push(r.a.createElement("div",{className:"col col-center",key:n},n))}return r.a.createElement("div",{className:"days row"},e)},H=a(75),q=a(88),Q=a(89),V=a(90),X=a(91),Y=a(109),Z=a(203),$=a(87),ee=a(110),te=a(202),ae=a(5),ne=a(208),re=a(7),ce=Object(re.a)((function(e){return{tooltip:{}}}))(ne.a);var le=function(e){var t=e.items.map((function(t){return r.a.createElement(S.a,{key:e.items.indexOf(t)},t)}));return r.a.createElement(ce,{arrow:!0,placement:"top",title:t},r.a.createElement("span",{className:"icon"},e.icon))},oe=a(204),se=a(21),ie=a(115),ue=Object(re.a)({root:{width:"5.5rem",margin:"0.5rem"}})(oe.a);var me=function(e){return r.a.createElement(se.a,{utils:ie.a},r.a.createElement(ue,{label:"Start",value:e.shiftStartTime,onChange:e.setShiftStartTime,minutesStep:5}),r.a.createElement(ue,{label:"End",value:e.shiftEndTime,onChange:e.setShiftEndTime,minutesStep:5}))};var de=function(e){var t=r.a.useState(!1),a=Object(o.a)(t,2),n=a[0],c=a[1];if(e.items.length<1)return r.a.createElement(w.a,{disabled:!0},r.a.createElement("span",{className:"icon notifier"},e.icon));var l=function(){c(!0)},s=e.items.map((function(t){return r.a.createElement(S.a,{key:e.items.indexOf(t)},t)}));return r.a.createElement(ne.a,{arrow:!0,placement:"top",title:s,onClose:function(){return c(!1)},open:n},r.a.createElement(w.a,{onClick:l,onMouseOver:l},r.a.createElement("span",{className:"icon notifier"},e.icon)))},fe=(a(151),function(e){var t=B.a(e.day,"EEEE, MMMM d"),a=r.a.useState(k("startTime")),n=Object(o.a)(a,2),c=n[0],l=n[1],s=r.a.useState(k("endTime")),i=Object(o.a)(s,2),m=i[0],d=i[1],f=r.a.useState(""),p=Object(o.a)(f,2),h=p[0],E=p[1],v=Object(u.f)((function(e){return e.loggedUser})),y=Object(u.e)((function(e){return e.addShift})),g=Object(u.e)((function(e){return e.delShift})),b=Object(u.e)((function(e){return e.addMessage})),O=v.isAdmin?"":"none",j=void 0!==e.userShift.isAllDay,S=j?"":"none",N=j?"none":"",M=!j||h.length>1?"":"none";function k(t){return void 0!==e.userShift[t]?e.userShift[t]:"startTime"===t?e.day.setHours(8):e.day.setHours(16)}return r.a.createElement(C.a,{open:e.isModalOpen,onClose:e.onModalClose,"aria-labelledby":"form-dialog-title",className:"day-modal"},r.a.createElement(U.a,{id:"form-dialog-title"},t),r.a.createElement(T.a,null,r.a.createElement(de,{icon:"report",items:e.dayAlerts}),r.a.createElement(de,{icon:"textsms",items:e.dayFormattedMessages}),r.a.createElement(de,{icon:"people_alt",items:e.dayWorkers}),r.a.createElement("hr",null),r.a.createElement("div",{style:{display:N}},r.a.createElement(ne.a,{arrow:!0,placement:"top",title:"Reserve full day"},r.a.createElement(w.a,{onClick:function(){var t={day:e.day,newShift:{user:v.name,startTime:c,endTime:m,isAllDay:!0}};y(t),e.onModalClose()},fullWidth:!0,variant:"contained",disableElevation:!0,style:{background:"rgba(255, 255, 0, 0.2)",border:"1px lightgrey solid"}},r.a.createElement("span",{className:"icon"},"bookmark_border"),"Reserve all day"))),r.a.createElement("div",{className:"time-range-picker ".concat(e.dayColor)},r.a.createElement(me,{day:e.day,shiftStartTime:c,setShiftStartTime:l,shiftEndTime:m,setShiftEndTime:d})),r.a.createElement("div",{style:{display:S}},r.a.createElement(ne.a,{arrow:!0,placement:"top",title:"Delete shift"},r.a.createElement(w.a,{onClick:function(){var t={day:e.day,user:e.userShift.user};g(t),e.onModalClose()},fullWidth:!0,variant:"contained",disableElevation:!0},r.a.createElement("span",{className:"icon"},"delete"),"Delete shift"))),r.a.createElement("div",{style:{display:O}},r.a.createElement(D.a,{autoFocus:!1,id:"name",label:"Add a Message",type:"name",fullWidth:!0,value:h,onChange:function(e){E(e.target.value)}}))),r.a.createElement(x.a,null,r.a.createElement("div",{style:{display:M}},r.a.createElement(w.a,{onClick:function(){if(h.length<1){var t={day:e.day,newShift:{user:v.name,startTime:c,endTime:m,isAllDay:!1}};y(t),e.onModalClose()}else{var a={day:e.day,newMessage:{user:v.name,content:h}};b(a),E("")}},color:"primary",size:"small"},"save"))))});a(152);var pe=function(e){var t=Object(u.f)((function(e){return e.selectedDate})),a=Object(u.e)((function(e){return e.onSelectDate})),n=Object(u.f)((function(e){return e.loggedUser})),c=r.a.useState(!1),l=Object(o.a)(c,2),s=l[0],i=l[1],m=void 0===e.dayData?[]:e.dayData.shifts,d=void 0===e.dayData?[]:e.dayData.alerts,f=void 0===e.dayData?[]:e.dayData.messages,p=m.map((function(e){return e.user})),h=function(){var e=v();return void 0===e.isAllDay?null:e.isAllDay?"yellow":"green"}(),E=f.map((function(e){return"".concat(e.user,": ").concat(e.content)}));function v(){var e,t=Object(H.a)(m);try{for(t.s();!(e=t.n()).done;){var a=e.value;if(a.user===n.name)return a}}catch(r){t.e(r)}finally{t.f()}return[]}return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"col cell ".concat(ee.a(e.day,e.monthStart)?te.a(e.day)?"closed":Y.a(e.day,e.selectedDate)?"selected":null:"disabled"),onClick:function(){return n=ae.a(e.day),void(Y.a(n,t)?i(!0):a(n));var n}},r.a.createElement("span",{className:"number ".concat(h)},e.formattedDate),r.a.createElement("span",{className:"bg"},e.formattedDate),r.a.createElement("div",{className:"notifiers-area"},void 0===e.dayData?null:[f.length<1?null:r.a.createElement(le,{icon:"textsms",items:E,key:"m"}),d.length<1?null:r.a.createElement(le,{icon:"report",items:d,key:"a"})])),r.a.createElement(fe,{day:e.day,isModalOpen:s,onModalClose:function(){return i(!1)},dayFormattedMessages:E,dayWorkers:p,dayAlerts:d,userShift:v(),dayColor:h}))};a(153);var he=function(){var e=Object(u.f)((function(e){return e.currentMonth})),t=Object(u.f)((function(e){return e.selectedDate})),a=Object(u.f)((function(e){return e.data})),n=q.a(e),c=Q.a(n),l=V.a(n),o=X.a(c),s=[],i=[],m=l;function d(e){var t,n=Object(H.a)(a);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(Y.a(Z.a(r.date),e))return r}}catch(c){n.e(c)}finally{n.f()}}for(;m<=o;){for(var f=0;f<7;f++){var p=B.a(m,"d");i.push(r.a.createElement(pe,{key:m,day:m,dayData:d(m),monthStart:n,selectedDate:t,formattedDate:p})),m=$.a(m,1)}s.push(r.a.createElement("div",{className:"row",key:m},i)),i=[]}return r.a.createElement("div",{className:"body"},s)};a(154);var Ee=function(){var e=Object(u.e)((function(e){return e.fetchData})),t=Object(u.e)((function(e){return e.fetchLoggedUser}));return Object(n.useEffect)((function(){var a=localStorage.getItem("username");a&&(e(),t(a))}),[]),r.a.createElement("div",{className:"calendar"},r.a.createElement(K,null),r.a.createElement(G,null),r.a.createElement(he,null))},ve=a(112),ye=a.n(ve),ge=a(111),be=a.n(ge);a(155);var Oe=function(e){var t=r.a.useState(""),a=Object(o.a)(t,2),n=a[0],c=a[1],l=r.a.useState(""),s=Object(o.a)(l,2),i=s[0],u=s[1],m=e.setIsUserKnown;return r.a.createElement("div",{className:"login-page"},r.a.createElement("div",{className:"column"},r.a.createElement(N.a,{color:"inherit",className:"logos"},r.a.createElement("span",{className:"logo-first-item"},r.a.createElement("img",{src:be.a,alt:"Tagforce logo",height:"30em"})),r.a.createElement("span",{className:"logo-divider"},"|"),r.a.createElement(ye.a,null),r.a.createElement(S.a,{variant:"overline",style:{margin:"0.8em 0em 0em 0.25em"}},"Tagluz")),r.a.createElement("div",{className:"row"},r.a.createElement(D.a,{label:"Username:",id:"username",type:"username",autoFocus:!1,fullWidth:!1,value:n,onChange:function(e){c(e.target.value)}})),r.a.createElement("div",{className:"row"},r.a.createElement(D.a,{label:"Password:",id:"password",type:"password",autoFocus:!1,fullWidth:!1,value:i,onChange:function(e){u(e.target.value)}})),r.a.createElement("div",{className:"row"},r.a.createElement(w.a,{onClick:function(){return function(e,t){fetch("http://".concat("tagluz.azurewebsites.net","/users/checkUser/").concat(n,"/").concat(t)).then((function(e){return e.json()})).then((function(e){e&&(localStorage.setItem("username",n),m(!0))}))}(0,i)},color:"primary",fullWidth:!0,variant:"outlined"},"Log In"))))};var je=function(){var e=r.a.useState(null!==localStorage.getItem("username")),t=Object(o.a)(e,2),a=t[0],c=t[1],l=r.a.useState(""),m=Object(o.a)(l,2),d=m[0],f=m[1];return Object(n.useEffect)((function(){f(a?"/calendar":"/login")}),[a]),r.a.createElement("div",{className:"App"},r.a.createElement(u.a,{store:y},r.a.createElement(s.a,null,d?r.a.createElement(i.a,{to:d}):r.a.createElement(r.a.Fragment,null),r.a.createElement(i.d,null,r.a.createElement(i.b,{path:"/login"},r.a.createElement(Oe,{isUserKnown:a,setIsUserKnown:c})),r.a.createElement(i.b,{path:"/calendar"},r.a.createElement(P,null),r.a.createElement("main",null,r.a.createElement(Ee,null)),r.a.createElement(g,null)),r.a.createElement(i.b,{path:"*"},r.a.createElement(i.a,{to:d}))))))};l.a.render(r.a.createElement(r.a.Fragment,null,r.a.createElement(je,null)),document.getElementById("root"))}},[[134,1,2]]]);
//# sourceMappingURL=main.5b7f71b9.chunk.js.map